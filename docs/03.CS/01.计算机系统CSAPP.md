---
title: 计算机系统 CSAPP
date: 2023-07-22 00:53:04
permalink: /pages/csapp/
---

计统这本书前9章（一二部分）主要讲述的就是一个程序从无到有再到无的生命周期：

> 文本 -> 可执行程序 -> 进程 -> 回收

这个过程中少不了操作系统和硬件的支持，因此会涉及不少硬件组成相关的知识（也就是计算机组成原理的内容）。不过学习最好还是自顶向下的了解，然后再自底向上的回顾，所以复习的时候我不会先写第二章（信息）的内容，章节顺序会有所调整。

跟着这篇复习一遍知识点，然后看一纸开卷（或者过一遍 PPT）不熟悉的点多看会，基本没问题了，然后做做题啥的

## 计算机漫游

第一章其实对于把握整体的知识脉络挺重要的，在复习的过程中可以顺便结合其他章节的部分知识回顾。首先是这张图——编译系统，描述文本到程序的过程：

![编译系统](https://dataphoto.sibnet.ru/upload/imgbig/1687965157101480540.jpg)

- 预处理阶段：处理 `#include` `#define` 这类 `#` 开头的命令，处理方式很简单，就是查找替换插入的操作，结果还是 C 语言程序的文本
- 编译阶段：**编译器**把 C 语言翻译成汇编语言，结果是汇编语言的**文本**
- 汇编阶段：**汇编器**把汇编语言翻译成机器指令，结果是可重定位的**二进制程序**
- 链接阶段：通常一个程序是有输入输出的，这些经常使用的函数存在库里方便调用，生成程序的时候得把他们连过来，结果生成可执行程序

处理四个过程的预处理器，编译器，汇编器，链接器可以用 gcc 编译驱动程序统一控制



这个编译系统过程中：预处理只是文本到文本的替换，不复杂；
汇编阶段因为汇编语句和机器码指令是一一对应的，是文本的二进制的替换，也不负责；
主要是**编译阶段**和**链接阶段**，前者要考虑

- 怎么设计几条简单的指令（Chapter3 机器级表示），向上可以组合成丰富的程序语言，向下可以实现对硬件系统的控制，
- 如何用简单通用的方式表示这些指令（Chapter2 信息）
- 还有考虑运行过程中效率优化的问题（Chapter5 优化+Chapter6 存储器）

后者要考虑程序与程序之间的配合（Chapter7 链接）需要预先约定好格式，这个格式是什么样的（ELF格式），又怎么用（符号解析+重定位）



第二张图——硬件组成图

![硬件组成](https://dataphoto.sibnet.ru/upload/imgbig/1687965159231480540.jpg)

键盘输入指令，CPU 接受控制访问磁盘，程序文件读入主存，从主存把指令调入 CPU 运行

> 这个过程最好自己沿着总线画一画，试试信息是沿着怎么样的路径传输的
>
> 知识点：四个抽象。具象的熟悉之后看点抽象的，计算机从 I/O 设备+主存+处理器+操作系统 的具体组成开始，可以依次抽象出「文件」「虚拟内存」「进程」「虚拟机」的概念

这个过程：

1. 数据频繁移动，存储层次金字塔，如何提升效率？两套存储系统（Chapter6 Cache-主存，Chapter9 主存-虚拟内存）
2. CPU 发号施令，各个硬件之间如何沟通？Chapter8 信号 & 异常