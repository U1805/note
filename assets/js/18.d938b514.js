(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{331:function(a,s,t){"use strict";t.r(s);var n=t(7),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("前端程序和后端程序在服务器上部署流程的记录")]),a._v(" "),s("p",[a._v("前端程序：Vue 开发"),s("br"),a._v("\n后端程序：Java SpringBootWeb + Mysql + Mybatis")]),a._v(" "),s("h2",{attrs:{id:"前端部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端部署"}},[a._v("#")]),a._v(" 前端部署")]),a._v(" "),s("h3",{attrs:{id:"本机导出文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本机导出文件"}},[a._v("#")]),a._v(" 本机导出文件")]),a._v(" "),s("p",[a._v("Vue 生成静态网页文件，"),s("code",[a._v("npm run deploy")])]),a._v(" "),s("h3",{attrs:{id:"服务器部署文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器部署文件"}},[a._v("#")]),a._v(" 服务器部署文件")]),a._v(" "),s("p",[a._v("服务器上安装并启动 nginx")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" nginx\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" nginx start\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("配置文件路径在 "),s("code",[a._v("/etc/nginx")]),a._v(" 可以找到默认端口 80、静态文件路径 "),s("code",[a._v("/var/www/html")])]),a._v(" "),s("p",[a._v("访问 ip:80 可以正常打开（打不开可能需要安全组开80端口")]),a._v(" "),s("p",[a._v("把最开始的静态文件放到 "),s("code",[a._v("/var/www/html")]),a._v(" 刷新浏览器")]),a._v(" "),s("h2",{attrs:{id:"后端部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后端部署"}},[a._v("#")]),a._v(" 后端部署")]),a._v(" "),s("h3",{attrs:{id:"本机导出数据库数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本机导出数据库数据"}},[a._v("#")]),a._v(" 本机导出数据库数据")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mysqldump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" root "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" dbName "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" sqlFile.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"本机导出-jar-包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本机导出-jar-包"}},[a._v("#")]),a._v(" 本机导出 jar 包")]),a._v(" "),s("p",[a._v("war 包的话还需要服务器上安装 tomcat，方便起见导出 jar 包")]),a._v(" "),s("p",[a._v("pom.xml 中设置到处 jar")]),a._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n  ...\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("packaging")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("jar"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("packaging")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("application.properties 改好数据库端口密码，"),s("code",[a._v("maven package")]),a._v("，导出文件在 target/xx.jar")]),a._v(" "),s("h3",{attrs:{id:"服务器导入数据库数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器导入数据库数据"}},[a._v("#")]),a._v(" 服务器导入数据库数据")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" mysql-server\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 默认密码")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/mysql/debian.cnf 或者用 root 用户直接登录\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更改密码策略（弱密码可选）")]),a._v("\nSHOW VARIABLES LIKE "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'validate_password%'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nSET global "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("validate_password.policy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nSET global "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("validate_password.length")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更改密码")]),a._v("\nALTER "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("USER")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'root'")]),a._v("@"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'localhost'")]),a._v(" IDENTIFIED BY "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'123456'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建数据库")]),a._v("\nCREATE DATABASE dbName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 导入数据库")]),a._v("\nmysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uroot")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" dbName "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" sqlFile.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("h3",{attrs:{id:"服务器运行-jar-包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器运行-jar-包"}},[a._v("#")]),a._v(" 服务器运行 jar 包")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" openjdk-17-jdk\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" xx.jar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("正常运行，但是目前只是在终端会话中运行，终端结束时程序会停止。这里需要用 nohup(no hang up) 挂起")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" xx.jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查找pid关闭")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-aux")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"xx.jar"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-9")]),a._v(" PID\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);